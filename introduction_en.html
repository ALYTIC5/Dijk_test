<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8"/>
	<link rel="stylesheet" href="./src/css/style.css" media="all"/>
	<title>Dijk van een Wijf | Introduction</title>
	<meta name="description" content="Listen to the introduction and then speak with the Wad."/>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, minimum-scale=1.0">
	<link rel="icon" type="image/png" href="/assets/favicon/favicon-96x96.png" sizes="96x96" />
	<link rel="icon" type="image/svg+xml" href="/assets/favicon/favicon.svg" />
	<link rel="shortcut icon" href="favicon.ico" />
	<link rel="apple-touch-icon" sizes="180x180" href="/assets/favicon/apple-touch-icon.png" />
	<meta name="apple-mobile-web-app-title" content="Dijk van een Wijf" />
	<link rel="manifest" href="/assets/favicon/site.webmanifest" />
</head>
<body class="page page--introduction">
<main>
	<article>
		<section>
			<div class="relative container pt-13 pb-4 z-10">
				<div class="relative text-center text-white">
					<div class="flex mb-11 justify-center items-center">
						<a href="./index.html" title="Back to home">
							<figure>
								<img src="./assets/img/dijk-van-een-wijf-logo-white.png" alt="Back to home">
							</figure>
						</a>
					</div>
					<div class="inline-flex gap-1 px-2.5 items-center leading-none py-1.5 bg-[var(--color-orange)] text-[13px] mb-4 rounded-full text-black-default">
						<i class="icon-volume"></i>
						<span class="font-semibold">Tip: turn your audio on!</span>
					</div>
					<h1>Introduction</h1>
					<p class="font-semibold text-pretty">Welcome to Dijk van een Wijf. Before you begin, weâ€™ll guide you through a short journey about this unique landscape.</p>
					<p class="text-pretty">Discover the calm and wisdom of the Wad, and learn how you can be part of this story.</p>
					<div class="flex justify-center flex-row items-start gap-2.5 mt-10">
						<a class="btn btn--white btn--back justify-center w-[42px]" title="Back to home" href="./index.html">
							<i class="icon-chevron-left"></i>
						</a>
						<a class="btn btn--secondary group inline-flex items-center gap-2.5" title="Speak to the Wad" href="./conversation_en.html">
							<span>Speak to the Wad</span>
							<i class="icon-speak text-[22px] group-hover:ml-2"></i>
						</a>
					</div>
				</div>
			</div>
		</section>
		<div class="absolute left-[calc(50%_-_3rem)] right-1/2 top-5 -translate-x-1/2 bg-[url(../../assets/img/backgrounds/bg-black-blob.svg)] bg-no-repeat w-[658px] h-[863px]"></div>
	</article>
</main>

<!-- Audio -->
<audio id="bgAudio" loop preload="auto" playsinline></audio>
<audio id="introAudio" preload="auto" playsinline></audio>

<script>
  const SEASON_TRACKS = [
    "./assets/audio/Soundscapes - Lente - Dijk van een Wijf V2.mp3",
    "./assets/audio/Soundscapes - Zommer - Dijk van een Wijf V2.mp3",
    "./assets/audio/Soundscapes - Herfst - Dijk van een Wijf V2.mp3",
    "./assets/audio/Soundscapes - Winter - Dijk van een Wijf V2.mp3"
  ];
  const INTRO_EN = "./assets/audio/DveW_Intro_EN_2 (silent intro).mp3";

  function getSeasonIndex() {
    const m = new Date().getMonth();
    if (m>=2 && m<=4) return 0;
    if (m>=5 && m<=7) return 1;
    if (m>=8 && m<=10) return 2;
    return 3;
  }

  const bgEl = document.getElementById("bgAudio");
  const introEl = document.getElementById("introAudio");

  let audioCtx, bgGain, voiceGain, graphReady = false;
  function ensureGraph() {
    if (graphReady) return;
    audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    bgGain = audioCtx.createGain();
    voiceGain = audioCtx.createGain();
    bgGain.gain.value = 0.20;
    voiceGain.gain.value = 1.0;
    audioCtx.createMediaElementSource(bgEl).connect(bgGain).connect(audioCtx.destination);
    audioCtx.createMediaElementSource(introEl).connect(voiceGain).connect(audioCtx.destination);
    graphReady = true;
  }

  function startAudio() {
    ensureGraph();
    if (audioCtx.state === "suspended") audioCtx.resume();

    bgEl.src = SEASON_TRACKS[getSeasonIndex()];
    bgEl.play().catch(()=>{});

    introEl.src = INTRO_EN;
    introEl.play().catch(()=>{});
  }

  window.addEventListener("DOMContentLoaded", startAudio);
</script>
</body>
</html>
